<!DOCTYPE html>
<html>
<head>
  <title>QR Code Scanner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    
    h1 {
      margin-top: 20px;
    }
    
    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 80vh;
    }
    
    .option {
      margin: 20px;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #f7f7f7;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      transition: box-shadow 0.3s ease-in-out;
      cursor: pointer;
      display: inline-block;
      text-align: center;
    }
    
    .option:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .option h2 {
      margin-top: 0;
    }
    
    .result {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>QR Code Scanner</h1>
  
  <div class="container">
    <div class="option" onclick="startScanner('Option A')">
      <h2>Scan Option A</h2>
      <video id="previewA"></video>
      <div class="result" id="resultA"></div>
    </div>
  
    <div class="option" onclick="startScanner('Option B')">
      <h2>Scan Option B</h2>
      <video id="previewB"></video>
      <div class="result" id="resultB"></div>
    </div>
  </div>

  <script src="https://unpkg.com/@zxing/library@0.18.5"></script>
  <script>
    let scannerA, scannerB;

    function startScanner(option) {
      let optionElement = document.getElementById('result' + option);
      optionElement.innerHTML = 'Initializing...';

      // Create scanner for the selected option
      let scanner;
      if (option === 'Option A') {
        scanner = scannerA || createScanner('previewA', optionElement, option);
        scannerA = scanner;
      } else if (option === 'Option B') {
        scanner = scannerB || createScanner('previewB', optionElement, option);
        scannerB = scanner;
      }

      // Start the scanner
      startCameraScanner(scanner, optionElement, option);
    }

    function createScanner(videoId, resultElement, option) {
      let video = document.getElementById(videoId);
      let scanner = new ZXing.BrowserMultiFormatReader();

      scanner.listVideoInputDevices()
        .then(function(videoInputDevices) {
          if (videoInputDevices.length > 0) {
            scanner.decodeFromVideoDevice(videoInputDevices[0].deviceId, video, function(result) {
              handleScanResult(result.text, resultElement, option);
            });
            resultElement.innerHTML = 'Scanner started for ' + option;
          } else {
            console.error('No video input devices found for ' + option);
            resultElement.innerHTML = 'Error: No video input devices found for ' + option;
          }
        })
        .catch(function(err) {
          console.error(err);
          resultElement.innerHTML = 'Error: ' + err.message;
        });

      return scanner;
    }

    function startCameraScanner(scanner, resultElement, option) {
      let video = document.getElementById('preview' + option);

      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
          video.srcObject = stream;
          video.play();
        })
        .catch(function(err) {
          console.error(err);
          resultElement.innerHTML = 'Error: ' + err.message;
        });
    }

    function handleScanResult(content, resultElement, option) {
      resultElement.innerHTML = 'QR Code Value (' + option + '): ' + content;

      // Check if scanned QR code matches a predefined value
      let predefinedValueA = "1234";
      let predefinedValueB = "5678";

      if (option === "Option A" && content === predefinedValueA) {
        showAlert("QR Code A matches the predefined value!");
      } else if (option === "Option B" && content === predefinedValueB) {
        showAlert("QR Code B matches the predefined value!");
      }
    }

    function showAlert(message) {
      alert(message);
    }
  </script>
</body>
</html>
