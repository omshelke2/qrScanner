<!DOCTYPE html>
<html>
<head>
  <title>QR Code Scanner</title>
  <style>
    #preview {
      width: 100%;
      height: auto;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>QR Code Scanner</h1>
  
  <button id="startButton" onclick="startScanner()">Start Scanner</button>
  
  <div id="scanOptions" style="display: none;">
    <h2>Scan Option 1</h2>
    <p>Scan QR Code A:</p>
    <video id="previewA"></video>
    
    <h2>Scan Option 2</h2>
    <p>Scan QR Code B:</p>
    <video id="previewB"></video>
  </div>
  
  <div id="result"></div>

  <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
  <script>
    let scannerA, scannerB;
    
    function startScanner() {
      document.getElementById("startButton").style.display = "none";
      document.getElementById("scanOptions").style.display = "block";
      
      // Create scanner for option 1
      scannerA = new Instascan.Scanner({ video: document.getElementById('previewA'), mirror: false });
      scannerA.addListener('scan', function(content) {
        handleScanResult(content, "Option A");
      });
      Instascan.Camera.getCameras().then(function(cameras) {
        startCameraScanner(scannerA, cameras, "Option A");
      });
      
      // Create scanner for option 2
      scannerB = new Instascan.Scanner({ video: document.getElementById('previewB'), mirror: false });
      scannerB.addListener('scan', function(content) {
        handleScanResult(content, "Option B");
      });
      Instascan.Camera.getCameras().then(function(cameras) {
        startCameraScanner(scannerB, cameras, "Option B");
      });
    }
    
    function startCameraScanner(scanner, cameras, option) {
      if (cameras.length > 0) {
        let backCamera = cameras.find(function(camera) {
          return camera.name.toLowerCase().includes('back');
        });
        if (!backCamera) {
          backCamera = cameras[0];
        }
        scanner.start(backCamera);
        console.log("Started scanner for " + option);
      } else {
        console.error('No cameras found for ' + option);
      }
    }
    
    function handleScanResult(content, option) {
      document.getElementById('result').innerHTML = 'QR Code Value (' + option + '): ' + content;
      
      // Check if scanned QR code matches a predefined value
      let predefinedValueA = "1234";
      let predefinedValueB = "5678";
      
      if (option === "Option A" && content === predefinedValueA) {
        showAlert("QR Code A matches the predefined value!");
      } else if (option === "Option B" && content === predefinedValueB) {
        showAlert("QR Code B matches the predefined value!");
      }
    }
    
    function showAlert(message) {
      alert(message);
    }
  </script>
</body>
</html>
